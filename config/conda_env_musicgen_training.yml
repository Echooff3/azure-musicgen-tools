name: musicgen-training-env
channels:
  - conda-forge
  - defaults
dependencies:
  - python=3.10
  - ffmpeg
  - pip
  - pip:
    # PyTorch 2.3.1 with CUDA 11.8 support - required by transformers 4.42.0+
    - torch==2.3.1
    - torchaudio==2.3.1
    # Transformers 4.42.0+ required for EncoderDecoderCache and torch 2.3+ pytree API
    - transformers>=4.42.0
    # LoRA training and acceleration
    - peft>=0.8.0
    - accelerate>=0.25.0
    - datasets>=2.14.0
    # Azure SDK
    - azure-storage-blob>=12.19.0
    - azure-identity>=1.15.0
    - azure-ai-ml>=1.12.0
    - azureml-core>=1.57.0
    - azureml-defaults>=1.57.0
    # Audio processing (librosa needs soundfile, scipy, numpy)
    - librosa>=0.10.0
    - soundfile>=0.12.1
    - numpy>=1.24.0,<2.0.0
    - scipy>=1.10.0
    # Training utilities
    - tqdm>=4.65.0
    - tensorboard
    # Note: audiocraft removed - not used in training script
    # MusicGen is loaded directly from transformers/HuggingFace
